# 王道论坛 - 计算机网络

- [计算机网络体系结构](#计算机网络体系结构)
- [物理层](#物理层)
- [数据链路层](#数据链路层)


### 计算机网络体系结构

**概述:**

一般定义: 计算机网络是一个将分散的, 具有独立功能的计算机系统, 通过通信设备与线路连接起来, 由功能完善的软件实现资源共享和信息传递的系统.

三种观点: 广义观点, 资源共享观点, 用户透明性观点

从组成部分上看: 硬件, 软件, 协议三部分.

其中, 硬件主要由: 主机, 通信链路(双绞线, 光纤), 交换设备(如路由器, 交换机等)和通信处理机(如网卡)等组成; 软件主要包括实现资源共享的软件和方便用户使用的各种工具(如网络操作系统, 邮件收发程序, FTP程序, 聊天程序). 协议是计算机网络的核心.

从工作方式上: 计算机网络可分为边缘部分和核心部分, 核心部分由大量的网络和连接这些网络的路由器组成, 它为边缘部分提供连通性和交换服务.

从功能组成上看: 通信子网和资源子网组成.

**计算机网络的功能:** 

1. 数据通信
2. 资源共享
3. 分布式处理
4. 提高可靠性
5. 负载均衡

**计算机网络的分类**

- 分布范围分类

1. 广域网WAN(覆盖范围, 几十千米到几千千米, 任务为提供长距离的通信, 因特网的核心部分)
2. 城域网MAN(覆盖范围, 5~50千米 几个街区到整个城市)
3. 局域网LAN(覆盖范围, 几十米到几千米, 传统上, 局域网上使用广播技术, 广域网使用交换技术)
4. 个人区域网PAN(或WPAN, 覆盖范围10m)

- 按传输技术分类

1. 广播式网络

当一台计算机利用共享通信信道发送报文分组时, 所有其它的计算机都会"收听"到这个分组. 接收到的计算机通过检查目的地址来决定是否接收该分组. 如局域网, 广域网中无线, 卫星通信网络

2. 点对点网络

每条物理线路连接一对计算机, 若无直连线路, 那么它们间的分组传输就要通过蹭结点的接收, 存储和转发. (是否采用分组存储转发与路由机制是点对点式网络与广播式网络的重要区别), 广域网基本都是点对点网络.

- 按拓扑结构分类

网络结构是指由网中结点(路由器, 主机等)与通信线路(网络)之间的几何关系(如, 总线形, 环线形)表示的网络结构, 主要指通信子网的拓扑结构.

1. 星形网络

优: 便于集中控制管理; 缺: 成本高, 中心结点对故障敏感.

2. 总线形网络

优: 建网容易, 培养结点方便, 节省线路; 缺: 重负载时通信效率不高, 总线任意一处对故障敏感.

3. 环形网络

4. 网状形网络

规则型和非规则型2种, 优: 可靠性高; 缺: 控制复杂, 线路成本高.

- 按使用者分

1. 公用网
2. 专用网

- 按交换技术分类

1. 电路交换网络

在源结点与目的结点之间建立一条专用的通路用于传送数据, 包括建立连接, 传输数据, 断开连接三阶段, 如传统电话网络.

优: 数据直接传送, 时延小; 缺: 线路利用率低, 不能充分利用线路容量, 不便于差错控制.

2. 报文交换网络

用户数据加上源地址, 目的地址, 校验码等辅助信息, 然后封闭成报文. 报文传送到相邻结点, 全部存储后, 再发送给下一个结点, 重复直到目的地. 报文交换网络也称 **存储-转发网络**, 优: 较充分地利用线路容量, 可以实现不同线路间不同数据率的转换, 可以实现格式转换, 可以实现一对多, 多对一的访问, 可以实现差错控制; 缺: 增大的了资源开销(如辅助信息导致处理时间和存储资源的开销), 增加了时延, 需要额外的控制机制来保证多个报文的顺序不乱序, 缓冲区难以管理(因报文的大小不确定, 接收方无法在接收报文之前预知报文大小.)

3. 分组交换网络

也秒**包交换网络**, 其原理是将数据分成较短的固定长度的数据块, 在每个数据块中加上目的地址, 源地址等辅助信息组成分组(包)传送到相邻结点(再存储-转发...). 主要特点是单个分组(它只是整体报文的一部分), 优:  较充分地利用线路容量, 可以实现不同线路间不同数据率的转换, 可以实现格式转换, 可以实现一对多, 多对一的访问, 可以实现差错控制 + 缓冲易于管理, 包的平均时延更小, 网络占用的平均缓冲区更少, 更易于标准化, 更适合应用. **主流网络基本都可视为分组交换网络**

- 传输介质 

1. 有线(双绞线网络, 同轴电缆网络)
2. 无线(蓝牙, 微波, 无线电)

**标准化**

所有标准都支 RFC(Request For Comments) 形式在因特网上分布, 但并非所有RFC都是标准. 标准化, 一般要经历4个阶段

1. Internet Draft
2. Proposed Standard 开始成为RFC
3. Draft Standard
4. Internet Standard

组织有 ISO, ITU(国际电信联盟), IEEE(国际电所电子工程师协会)

**网络性能指标**

1. 带宽(Bandwidth), 表示网络的通信线路所能传送数据的能力, 是数字信道所能传送的"最高数据率"的同义词, 单位是比特/秒(b/s).
2. 时延(Delay), 指数据(一个报文或分组)从网络(或链路)的一端传送到另一端所需要的总时间, 它由4部分组成, 发送时延 + 传播时延 + 处理时延 + 排队时延.
3. 时延带宽积
4. 往返时延(Round-Trip Time, RTT), 指从发送端发送数据开始, 到发送端收到来自接收端的确认(接收端收到数据后立即发送确认), 总共经历的时延. 
5. 吞吐量(Throughput), 指单位时间内通过某个网络的数据量. 吞吐量受网络带宽或网络额定速率的限制
6. 速率(Speed),  是指连接到计算机网络上的主机在数字信道上 传送数据的速率, 也称数据率或比特率, 单位为 b/s, kb/s, Mb/s,  Gb/s. 最高速度称为带宽 :)

**计算机网络体系结构与参考模型**

各层次中, 每个报文都分为两部分, 一是数据部分, (服务数据单元)SDU, 二是控制信息部分, 协议控制信息(PCI), 它们共同组成协议数据单元(PDU)

n-SDU + n-PCI = n-PDU = (n-1)-SDU

- 计算机网络协议, 接口, 服务

1. 协议: 由语法, 语义和同步三部分组成, 语法规定传输数据格式, 语义规定完成的功能(何种控制信息, 完成何种动作及作出何种应答), 同步规定了执行各种操作的条件, 时序关系. 一个完整的协议应具有线路管理(建立, 释放连接), 差错管理, 数据转换.
2. 接口: 层次间交换信息
3. 服务: 下层能为上层提供的功能调用. 上层使用下层所提供的服务时, 必须与下层交换一些命令, 在OSI中称为服务原句 - 请求, 指示, 响应, 证实 (Request, Indication, Response, Confirmation).

- 计算机网线提供的服务可按三种方式分类 

1. 面向连接服务与无连接服务
2. 可靠服务与不可靠服务
3. 有应答服务与无应答服务

- (开放系统互连参考模型) OSI

1. 应用层 Application Layer

应用层为特定类型的网络应用提供访问OSI环境的手段. 该形使用协议最多, 如FTP, SMTP, HTTP

2. 表示层 Presentation Layer

表示层主要处理在两个通信系统中交换信息的表示方式. (不同机器采用的编码和表示方法不同, 使用的数据结构也不同, 为了使不同表示方法的数据和信息之间能互相交换) 表示层采用抽象的标准方法定义数据结构, 并采用标准的编码形式. 数据压缩, 加密和解密也是表示层可提供的数据表示变换功能.

3. 会话层 Session Layer

会话层允许主机上各个进程之间进行会话, 会话层主要负责管理主机间的会话进程, 包括建立, 管理及终止进程间的会话. (断点恢复通信, 避免重传全部文件)

4. 传输层 Transport Layer

传输单位是报文段(TCP)或用户数据报(UDP), 负责主机中两个进程之间的通信, 功能是为端到端连接提供可靠的传输服务, 为端到端连接提供流量控制, 差错控制, 服务质量, 数据传输管理等服务. 如TCP, UDP.

数据链路层提供的是点到点的通信(一个点是指硬件地址或IP地址), 端到端是指运行在不同主机内的两个进程之间的通信, 一个进程由一个端口来标识.

使用传输层服务, 高层用户可直接进行端到端的数据传输, 从而忽略通信子网的存在. 传输层具有**复用**(是指多个用层进程可同时使用传输层的服务) & **分用**(是指传输层把收到人信息分别交付给上面应用层中相应的进程)的功能.

5. 网络层 Network Layer

传输单位是报, 它关心通信子网的运行控制, 任务: 把网络层的协议数据单元(分组)从源端传到目的端, 为**分组交换网**上的不同主机提供通信服务. 关键问题: 对分组进行路由选择, 并实现流量控制, 拥塞控制, 差错控制和网际互联等功能. 

流量控制与数据链路层的流量控制含义一致, 都为协调A发送频率, B接收频率; 

差错控制是通信两结点之间约定的特殊检错规则, 如奇偶校验码, 能纠错就纠错, 不能就丢弃, 确保向上层提交的数据都是无误的.

拥塞控制是如果网络上的结点都处于来不及接收分组而要丢弃大量分组的情况, 那么网络就处于拥塞状态, 网络层要采取一定的措施来缓解这种拥塞.

因特网是一个很大的互联网, 它由大量异构网络通过路由器(Router)相互连接起来. 其主要网线层协议是无连接的网际协议(Internet Protocol, IP)和许多路由选择协议(如, IP, IPX, ICMP, IGMP, ARP, RARP), 该层又称IP层

6. 数据链路层 Data Link Layer

传输单位是帧, 任务: 是将网络层传来的 IP 数据报组装成帧. 功能: 可概括为 成帧, 差错控制, 流量控制和传输管理. (原始的物理连接在传输比特流时可能发生错误, 由于干扰, 差错控制可发现这些差错; 结点A发送数据比B接收数据快, B会丢弃很多来不及接收的正确数据, 流量控制可协调两结点速率.) 此处, 在广播式网络中, 数据链路层还要处理如何 控制对共享信道的访问. 数据链路层的特殊子层: 介质访问子层. 如SLC, HDLC, PPP, STP和帧中继.

7. 物理层 Physical Layer

传输单位是比特(bit), 任务: 是透明的传输比特流. 功能: 是在物理媒体上为数据端设备透明传输原始比特流. 主要定义: 数据终端设备(DTE)和数据通信设备(DCE)的物理与逻辑连接方法. 如EIA-232C, EIA/TIA RS-449, CCITT的X.21. 传输信息所利用的物理媒体(双绞线, 光缆, 无线信道), 并不在物理层之内.

- TCP/IP 模型

由低到高

1. 网络接口层

功能类似于OSI的物理层与数据链路层, 表示与物理网络的接口, 作用是从主机或结点接收IP分组, 并把它们发送到指定的物理网络上

2. 网际层

TPC/IP 体系结构的关键部分, 与OSI网络层的功能非常相似, 网际层将分组发往任何网络, 并为之独立的选择合适的路由, 但它不保证各个分组有序地到达. 定义了分组的格式和协议, 即IP.

3. 传输层

功能类似于OSI的传输层, 即使得发送端和目的端主机上的对等实体进行会话.  TCP(Transmission Control Protocol) / UDP(User Datagram Protocol)

4. 应用层

如, 虚拟终端Telnet, 文件传输协议FTP, 域名解析服务DNS, 电子邮件协议SMTP, 超文本传输协议HTTP


### 物理层

**通信基础**

- 数据, 信号, 码元(用一个固定时长的信号波形或数字脉冲表示一个k进制数字), 代表不同离散数值的基本波形.

- 信源, 信道, 信宿.

信道: 按传输信号形式不同, 分模拟信道与数字信道. 按传送的信号有基带信号和宽带信号

从通信双方通信方式可分:

1. 单工通信: 只有一个方向的通信, 仅需一条信道, 如无线电广播, 电视广播.
2. 半双工通信: 通信双方都可以发送或接收信息, 需要2条信道, 但不能同时, 如传呼机.
3. 全双工通信: 通信双方可同是发送和接收信息, 需要2条信道, 如电话.

- 速率, 波特, 带宽

速率也称数据率, 指的是数据的传输速率, 表示单位时间内传输的数据量. 可以用码元传输速率和信息传输速率表示(码元传输速率, 指单位时间内传输码元的个数, 单位是波特; 信息传输速率, 指单位时间内传输二进制码元个数, 即比特数, 单位是比特/秒 b/s).

带宽表示通信线路上数据传输能力.

**奈奎斯特定理 与 香农定理**

- 奈奎斯特定理

理想低通信信道下的极限数据传输率 = 2Wlog2V (b/s)

- 香农定理

带宽受限且有高斯白噪声干扰的信道的极限数据传输率 = Wlog2(1 + S/N)

1. W: 带宽, 单位Hz.
2. V: 每个码元离散电平的数目.
3. S: 信道所传输信号的平均功率.
4. N: 为信道内部的高斯噪声功率.
5. S/N: 信噪比 = 10log10(S/N)

**编码与调制**

1. 非归零编码
2. 曼彻斯特编码
3. 差分曼彻斯特编码
4. 4B/5B 编码

采样定理:

在通信领域, 带宽是指最高频率与最低频率之差, 单位为Hz. 假设原始信号中的最大频率为f, 则f采样 必须大于等于最大频率f的2倍.

**电路交换, 报文交换, 分组交换**

**数据报与虚电路**

分组交换根据通信子网向端点系统提供的服务, 还可进一步分为**面向连接的虚电路方式**和**无连接的数据报方式**.

- 数据报

在端系统中实现的高层协议先将报文拆分成若干带有序号的数据单元, 并在网络层加上地址等控制信息后形成网络层PDU. 特点:

1. 发送分组前不需要建立连接, 发送方随时发送分组, 网络中接点可随时接收分组
2. 传输不保证可靠, 可能丢失, 分组到达不一定按顺序
3. 发送的分组中要包含发送端与接收端的完整地址, 以便于独立发送
4. 分组在交换结点存储转发, 需要排队等待, 通信量大时交换结点可能丢弃分组
5. 网络故障时, 变换路径发送, 对故障适应能力强
6. 延时小, 提高了网络吞吐量
7. 收发双方不独占链路, 资源利用率高

- 虚电路

试图将数据报方式与电路交换方式结合, 在分组发送前, 要求在发送方与接收方建立一条逻辑上相连的虚电路, 并一量连接建立, 就固定了虚电路对应的物理路径. 与电路交换类似, 分虚电路建立 + 数据传输 + 虚电路释放.

1. 虚电路通信链路建立和拆除需要时间开销, 对交互式应用和小量的短分组情况显得很浪费, 但对长时间,频繁的数据交换效率很高
2. 虚电路的路由体现在连接建立阶段, 连接建立后, 就确定了传输路径
3. 虚电路提供了可靠的通信功能, 能保证每个分组正确且有序的到达. 此处, 还可对两个数据端点的流量进行控制.
4. 缺点, 网络故障时, 所有经过点故障点的虚电路被破坏
5. 分组首部不是包含目的地址而包含虚电路标识符, 相对数据报开销较小

评价维度: 连接建立与否, 目的地址, 路由选择, 分组顺序, 可靠性, 对网络故障是的适应性, 差错与流量控制

**传输介质**

双绞线, 同轴电缆, 光纤和无线传输介质(无线电波, 微波, 红外线, 激光)

**物理层接口特性**

物理层考虑的是如何在连接到各台计算机的传输媒体上传输数据比特流, 而不指具体的传输媒体. 物理层应屏蔽各种物理设备的差异, 使数据链路层只需要考虑本层的协议和服务. 

1. 机械特性, 如接口形状
2. 电气特性, 如信号电平
3. 功能特性, 如引脚功能
4. 规程特性, 如描述每种功能的事件发生顺序

**物理层设备**

- 中继器

将数字信号整形并放大再转发出去, 区别于放大器(其将衰减的信号放大)

5-4-3规则, 5段通信介质用4个中继器串联只有3段可以挂接计算机

有存储转发功能, 则可以认为它能连接2个不同的协议, 中继器不具体此功能(其2端必须使用同一个协议)

- 集线器 Hub

实质是一个多端口的中继器, 它在网络中只起信号放大和转发的作用, 目的是扩大网络的传输范围, 而不具备信号的定向传送能力(即信号传输的方向是固定的), 是一个标准的共享式设备.

### 数据链路层

**数据链路层功能**

在物理层提供的服务之上向网络层提供服务, 其主要作用是加强物理层传输原始比特流的功能, 将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路, 使之对网络层表现为一条无差错的链路.

- 为网络层提供服务

对网络层而言, 数据链路层的基本任务是将源机器中自网络层的数据传输到目标机器的网络层. 

1. 无确认的无连接服务

源机器发送数据帧时不需要先建立链路连接, 目的机器收到数据帧时不需要发回确认. 丢失的帧交给上层处理, 适用于实时通信或误码率较低的通信信道, 如以太网.

2. 有确认的无连接服

源机器发送数据帧时不需要先建立链路连接, 但目的机器收到时必须发回确认, 源机器在所规定的时间内未收到确定信号时, 就重传丢失的帧, 适用于误码率较高的通信信道, 如无线通信.

3. 有确认的面向连接的服务

帧传输分为三个阶段, 建立数据链路, 传输帧, 释放数据链路. 目的机器对收到的每一帧都要给出确认, 源机器收到确认后和能发送下一帧, 因为该服务的可靠性最高, 适用于通信要求高(可靠性, 实时性)的场合

- 链路管理

数据链路层连接的建立, 维持和释放过程称为链路管理. 在多个站点共享同一物理信道的情况下, (例如在局域网中)如何在要求通信的站点间分配和管理信道也属于数据链路层管理的范畴.

- 帧定界, 帧同步和透明传输

两个工作站之前传输信息时, 必须将网络层的分组封闭成帧, 以帧的格式进行传送. 将一段数据的前后分别添加首部和尾部(含控制信息, 用于确定帧的界限, 即帧定界), 就构成了帧.

帧同步是指, 接收方应能接收到的二进制比特流中区分出帧的起始与终止, 如在HDLC通信规程中, 用标识符F(01111110)来标识帧的开始和结束.

透明传输是指, 不论数据是什么样的比特组合(恰好出现01111110标识比特流), 都应当能在链路上传送.

- 流量控制

流量控制实际上就是限制发送方的数据流量, 使其发送率不超过接收方的接收能力. 

- 差错控制

由于信道噪声, 帧在传输过程中可能会出现错误, 用以使发送方确定接收方是否正确收到其发送数据的方法. 这些错误可分为位错与帧错.

位错指帧中某些位出现了差错. 通常采用循环冗余检验(CRC)方式发现错误, 通过自动重传请求(Automatic Request reQuest, ARQ)方式来重传出错的帧.

帧错指帧丢失, 重复或失序等错误, 在数据链路层引入定时器和编号机制, 能保证每一帧都"正确"交付目的结点.

**组帧**

数据链路层之所以要把比特合成帧为单位传输, 是为了在出错时只重发出错的帧, 而不重发全部数据. 发送方需按一定规则把网络层递交的分组封装成帧(组帧). 组帧主要解决帧定界, 帧同步, 透明传输等问题

- 字符计数法

字符计数是指在帧头部用一个字段来标明帧内字符数(包含其本身所占一个字节数), 问题在于如果计数字段本身出错, GG :)

- 字符填充的首尾定界符法

字符填充法使用一些特定的字段来定界一帧的开始与结束, 同时为了使信息位中出现的特殊字符不被误判, 在特殊字符前加转义字符(DLE), 转义字符DLE, 是ASCII码呻的控制字符.

- 比特填充的首尾标志法

比特填充法允许数据帧包含任意个数的比特, 也允许每个字符的编码包含任务个数的比特. 它使用一个特定的比特模式 01111110 来标志一个帧的开始, 结束. 为了使信息位中出现的比特流不被误判, 发送方在数据链路层的信息位中遇到5个连续的1时, 将自动在其后插入一个0, 而接收方做该过程的逆操作...厉害啦!

- 违规编码法

在物理层进行比特编码时, 通常采用违规编码法, 例如, 曼彻斯特编码方法将 1 编为"高 - 低"电平, 而 0 编为"低 - 高"电平, 而"高 - 高"与"低 - 低"在数据比特中是违规的, 可以借此来定界帧的起终..厉害啦! 局域网IEEE 802即采用此方法.

实际较常采用的是比特填充法和违规编码法.

**差错控制**

检错编码都采用冗余编码技术, 其核心思想是在有效数据发送前, 先按某种关系附加一定的冗余位再发送.

- 奇偶校验码

奇校验码: 1位的校验元 + n -1位信息元, 在一个校验元后, 码长为n的码字中, 1的个数为奇数

只能检测奇数个比特的错误

- 循环冗余校验

又称多式码, 模2除法, 得余数为检验序列(FCS)

带r个校验位的多项式编码可以检测所有长度小于等于r的突发性错误.

- 纠错编码

在每个要发送的数据块附加上足够的冗余信息, 使接收方能够推导出发出的实际是什么比特串, 如海明编码它能发现双比特错, 但只能纠正单比特错.

m个信息位插入r个校验位, 则 2**r >= m + r + 1

海明距离, 合法编码中, 两个码字的最小距离(不同位数). 检错 d + 1 纠错 2d + 1.

**流量控制与可靠传输机制**

- 流量控制, 可靠传输, 滑动窗口机制

流量控制的基本方法是由接收方控制发送方的速率

1. 停止-等待流量控制基本原理

发送方每发送一帧都要等待接收方的应答信号, 才能发送下一帧; 接收方每接收一帧都要反馈一个应答信号, 表示可以接收下一帧, 如果接收方不反馈应答信号, 那么发送方必须一直等待. 每次只允许发送一帧, 然后就陷入等待确认信号中, 传输效率低.

2. 滑动窗口流量控制基本原理

在任意时刻, 发送方都维持一组连续的允许发送的帧的序号, 称为发送窗口; 同时接收方也维持一组连续的允许接收帧的序号, 称为接收窗口. 

滑动窗口有以下重要特性:

a. 只有接收窗口向前滑动, 发送窗口才有可能向前滑动.

b. 从滑动窗口的概念看, 停止-等待协议, 后退N帧协议和选择重传协议只在发送窗口大小与接收窗口大小上有所差别:

> 停止-等待协议: 发送窗口大小 = 1, 接收窗口大小 = 1
> 后退N帧协议: 发送窗口大小 > 1, 接收窗口大小 = 1
> 选择重传协议: 发送窗口大小 > 1, 接收窗口大小 > 1

c. 接收窗口为1时, 可保证接收的帧的有序.
d. 数据链路层的滑动窗口协议中, 窗口的大小在传输过程中是固定的! (注意与传输层的滑动窗口协议的区别)

3. 可靠传输机制

数据链路层的可靠传输通常使用确认和超时重传机制来完成. 

自动重传请求(Auto Repeat reQuest, ARQ)通过接收方请求发送方重传出错的数据帧来恢复出错的数据帧. 传统自动重传请求分为三种: 停止-等待ARQ, 后退N帧ARQ, 选择重传ARQ. (后两种技术与滑动窗口技术结合, 又称连续ARQ), 注意在数据链路层上流量控制与可靠传输机制是交织在一起的.

- 单帧滑动窗口与停止-等待协议

停止-等待协议相当于滑动窗口与接收窗口大小都为1的滑动窗口协议. 在停止-等待协议中, 除数据帧丢失外, 还有以下2种情形

1. 到达目的站的帧已经破坏, 目的站简单丢失帧, 解决方案: 发送方在发出后型计时器.
2. 发送的数据帧正确无误到达目的站, 但确认帧被破坏 -> 发送方重传已经被接收的帧, 解决方案: 接收方发送的确认帧交替用0/1标识"收到的确认有误"/"重传已发送的帧"

- 多帧滑动窗口与后退N帧协议(GBN)

后退N帧式ARQ中, 发送方无需在收到上一个帧的ACK后才能开始发送下一帧, 而是可以连续发送帧. 当接收方检测出失序的信息帧后, 要求发送方重发最一个正确接收的信息帧后所有未被确认的帧; 未者当发送方发送了N个帧后, 若发现该N个帧的前一个帧在计时器超时后, 仍未返回其确认信息, 则该帧被判断为出错或丢失, 此时发送方就不得不重传该出错的帧及随后的N个帧. (换句话说, 接收方只允许按顺序接收.)

后退N帧协议的接收窗口为1, 可以保证按序接收数据帧, 若采用n比特对帧编号, 则其发送窗口的尺寸W应满足`<= 1 W <= 2**n - 1` 若发送窗口的尺寸大于`2**n - 1`, 则会造成接收方无法分辨新帧和旧帧.

- 多帧滑动窗口与选择重传协议(SR)

为了进一步提高信道的利用率, 可设法只重传出现差错的数据帧或计时器超时的数据帧, 但此时必须加大接收窗口, 可便先收下发送序号不连续但仍处在接收窗口中的那些数据帧. 等到所缺序号的数据帧收到后再一并送交主机(此为选择重传ARQ协议)

在选择重传ARQ中, 每个发送缓冲区对应一个计时器, 当计时器超时时, 缓冲区的帧就会重传, 另外, 该协议使用了比上述其它协议更有效的差错处理策略, 即一旦接收方怀疑帧出错, 就会发一个否定帧NAK给发送方, 要求发送对NAK中指定的帧重传.

